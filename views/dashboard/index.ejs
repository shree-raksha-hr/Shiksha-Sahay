

<div class="container my-4">
    <div class="row">
        <div class="col-12">
            <h2>Welcome, <%= user.name %>!</h2>
            <p class="text-muted">Role: <%= user.role.charAt(0).toUpperCase() + user.role.slice(1) %></p>
        </div>
    </div>
    
    <% if (user.role === 'school') { %>
        <!-- School Dashboard -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.totalClasses %></h4>
                        <p>Total Classes</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.bookedClasses %></h4>
                        <p>Booked Classes</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-warning text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.availableClasses %></h4>
                        <p>Available Classes</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5>Recent Classes</h5>
                        <a href="/classes/create" class="btn btn-sm btn-primary">Create New Class</a>
                    </div>
                    <div class="card-body">
                        <% if (dashboardData.classes.length > 0) { %>
                            <% dashboardData.classes.forEach(classItem => { %>
                                <div class="mb-3 p-3 border rounded">
                                    <h6><%= classItem.title %></h6>
                                    <p class="small text-muted"><%= classItem.subject %> - Grade <%= classItem.grade %></p>
                                    <p class="small">
                                        Date: <%= new Date(classItem.date).toLocaleDateString() %>
                                        | Status: <span class="badge bg-<%= classItem.status === 'booked' ? 'success' : 'warning' %>"><%= classItem.status %></span>
                                    </p>
                                    <% if (classItem.volunteerId) { %>
                                        <p class="small">Volunteer: <%= classItem.volunteerId.name %></p>
                                    <% } %>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p>No classes created yet. <a href="/classes/create">Create your first class</a></p>
                        <% } %>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Quick Actions</h5>
                    </div>
                    <div class="card-body">
                        <a href="/classes/create" class="btn btn-primary mb-2 w-100">Create New Class</a>
                        <a href="/classes" class="btn btn-outline-primary mb-2 w-100">View All Classes</a>
                    </div>
                </div>
            </div>
        </div>
        
    <% } else if (user.role === 'volunteer') { %>
        <!-- Volunteer Dashboard -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.myClasses %></h4>
                        <p>My Classes</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.availableClasses %></h4>
                        <p>Available Classes</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>Available Classes</h5>
                    </div>
                    <div class="card-body">
                        <% if (dashboardData.availableClasses.length > 0) { %>
                            <% dashboardData.availableClasses.forEach(classItem => { %>
                                <div class="mb-3 p-3 border rounded">
                                    <h6><%= classItem.title %></h6>
                                    <p class="small text-muted"><%= classItem.subject %> - Grade <%= classItem.grade %></p>
                                    <p class="small">School: <%= classItem.schoolId.schoolName %></p>
                                    <p class="small">Date: <%= new Date(classItem.date).toLocaleDateString() %></p>
                                    <a href="/classes/<%= classItem._id %>" class="btn btn-sm btn-primary">View Details</a>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p>No available classes at the moment.</p>
                        <% } %>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5>My Booked Classes</h5>
                    </div>
                    <div class="card-body">
                        <% if (dashboardData.myClasses.length > 0) { %>
                            <% dashboardData.myClasses.forEach(classItem => { %>
                                <div class="mb-3 p-3 border rounded">
                                    <h6><%= classItem.title %></h6>
                                    <p class="small text-muted"><%= classItem.subject %> - Grade <%= classItem.grade %></p>
                                    <p class="small">School: <%= classItem.schoolId.schoolName %></p>
                                    <p class="small">Date: <%= new Date(classItem.date).toLocaleDateString() %></p>
                                    <a href="/classes/<%= classItem._id %>" class="btn btn-sm btn-primary">View Details</a>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p>You haven't booked any classes yet. <a href="/classes">Browse available classes</a></p>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
        
    <% } else if (user.role === 'student') { %>
        <!-- Student Dashboard -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.totalMaterials %></h4>
                        <p>Total Materials</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.textMaterials %></h4>
                        <p>Text Lessons</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-info text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.videoMaterials %></h4>
                        <p>Video Lessons</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-warning text-white">
                    <div class="card-body">
                        <h4><%= dashboardData.stats.audioMaterials %></h4>
                        <p>Audio Lessons</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5>Recent Learning Materials</h5>
                    </div>
                    <div class="card-body">
                        <% if (dashboardData.recentMaterials.length > 0) { %>
                            <div class="row">
                                <% dashboardData.recentMaterials.forEach(material => { %>
                                    <div class="col-md-6 mb-3">
                                        <div class="card h-100">
                                            <div class="card-body">
                                                <h6><%= material.title %></h6>
                                                <p class="small text-muted"><%= material.subject %> - Grade <%= material.grade %></p>
                                                <span class="badge bg-<%= material.type === 'video' ? 'info' : material.type === 'audio' ? 'warning' : 'success' %>">
                                                    <%= material.type.charAt(0).toUpperCase() + material.type.slice(1) %>
                                                </span>
                                                <div class="mt-2">
                                                    <a href="/materials/view/<%= material._id %>" class="btn btn-sm btn-primary">View</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                            </div>
                        <% } else { %>
                            <p>No materials available yet.</p>
                        <% } %>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5>Quick Actions</h5>
                    </div>
                    <div class="card-body">
                        <a href="/materials" class="btn btn-primary mb-2 w-100">Browse Materials</a>
                        <a href="/chat" class="btn btn-outline-primary mb-2 w-100">AI Doubt Support</a>
                    </div>
                </div>
            </div>
        </div>
    <% } %>
</div>