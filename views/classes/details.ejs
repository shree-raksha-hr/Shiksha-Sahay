

<div class="container my-4">
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h4><%= classItem.title %></h4>
                    <span class="badge bg-<%= classItem.status === 'booked' ? 'success' : classItem.status === 'available' ? 'warning' : 'secondary' %> fs-6">
                        <%= classItem.status.charAt(0).toUpperCase() + classItem.status.slice(1) %>
                    </span>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6>Class Details</h6>
                            <p><strong>Subject:</strong> <%= classItem.subject %></p>
                            <p><strong>Grade:</strong> <%= classItem.grade %></p>
                            <p><strong>Date:</strong> <%= new Date(classItem.date).toLocaleDateString() %></p>
                            <p><strong>Time:</strong> <%= new Date(classItem.date).toLocaleTimeString() %></p>
                            <p><strong>Duration:</strong> <%= classItem.duration %> minutes</p>
                            <p><strong>Max Students:</strong> <%= classItem.maxStudents %></p>
                        </div>
                        <div class="col-md-6">
                            <h6>School Information</h6>
                            <p><strong>School:</strong> <%= classItem.schoolId.schoolName || classItem.schoolId.name %></p>
                            <p><strong>Contact:</strong> <%= classItem.schoolId.email %></p>
                            <% if (classItem.schoolId.phone) { %>
                                <p><strong>Phone:</strong> <%= classItem.schoolId.phone %></p>
                            <% } %>
                            
                            <% if (classItem.volunteerId) { %>
                                <h6 class="mt-3">Volunteer Information</h6>
                                <p><strong>Name:</strong> <%= classItem.volunteerId.name %></p>
                                <p><strong>Email:</strong> <%= classItem.volunteerId.email %></p>
                                <% if (classItem.volunteerId.phone) { %>
                                    <p><strong>Phone:</strong> <%= classItem.volunteerId.phone %></p>
                                <% } %>
                            <% } %>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Description</h6>
                        <p><%= classItem.description %></p>
                    </div>
                    
                    <% if (classItem.meetingLink) { %>
                        <div class="mb-4">
                            <h6>Meeting Link</h6>
                            <a href="<%= classItem.meetingLink %>" target="_blank" class="btn btn-info">
                                <i class="fas fa-video me-1"></i>Join Meeting
                            </a>
                        </div>
                    <% } %>
                </div>
                <div class="card-footer">
                    <% if (user.role === 'volunteer') { %>
                        <% if (classItem.status === 'available') { %>
                            <form method="POST" action="/classes/<%= classItem._id %>/book" class="d-inline">
                                <button type="submit" class="btn btn-success">
                                    <i class="fas fa-check me-1"></i>Book This Class
                                </button>
                            </form>
                        <% } else if (classItem.volunteerId && classItem.volunteerId._id.toString() === user.id) { %>
                            <form method="POST" action="/classes/<%= classItem._id %>/cancel" class="d-inline">
                                <button type="submit" class="btn btn-warning">
                                    <i class="fas fa-times me-1"></i>Cancel Booking
                                </button>
                            </form>
                        <% } %>
                    <% } else if (user.role === 'school' && classItem.schoolId._id.toString() === user.id) { %>
                        <% if (classItem.status === 'booked') { %>
                            <form method="POST" action="/classes/<%= classItem._id %>/cancel" class="d-inline">
                                <button type="submit" class="btn btn-warning">
                                    <i class="fas fa-times me-1"></i>Cancel Booking
                                </button>
                            </form>
                        <% } %>
                    <% } %>
                    
                    <a href="/classes" class="btn btn-secondary">
                        <i class="fas fa-arrow-left me-1"></i>Back to Classes
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h6>Quick Info</h6>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-calendar text-primary me-2"></i>
                        <span><%= new Date(classItem.date).toLocaleDateString() %></span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-clock text-primary me-2"></i>
                        <span><%= classItem.duration %> minutes</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-users text-primary me-2"></i>
                        <span>Max <%= classItem.maxStudents %> students</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-book text-primary me-2"></i>
                        <span><%= classItem.subject %></span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-graduation-cap text-primary me-2"></i>
                        <span>Grade <%= classItem.grade %></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>